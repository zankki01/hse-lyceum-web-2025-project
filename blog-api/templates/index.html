{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ë–ª–æ–≥{% endblock %}

{% block content %}
<div class="card">
    <h1>Welcome to Behelit</h1>
    
    <div class="actions">
        <a href="/posts/create" class="btn btn-success">üìù –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</a>
        <a href="/users/create" class="btn">üë§ –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
    </div>
</div>

<div class="card">
    <h2>üìñ –í—Å–µ –ø–æ—Å—Ç—ã</h2>
    
    {% if posts %}
        <div class="post-list">
            {% for post in posts %}
            <div class="card post-item">
                <h3 class="post-title">
                    <a href="/posts/{{ post.id }}">{{ post.title }}</a>
                </h3>
                <div class="post-meta">
                    –ê–≤—Ç–æ—Ä: <strong>{{ post.author_login }}</strong> 
                    | ID –∞–≤—Ç–æ—Ä–∞: {{ post.author_id }}
                </div>
                <p>{{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}</p>
                <div class="actions">
                    <a href="/posts/{{ post.id }}" class="btn">–ß–∏—Ç–∞—Ç—å</a>
                    <a href="/posts/{{ post.id }}/edit" class="btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form method="post" action="/posts/{{ post.id }}/delete" style="display:inline;">
                        <button type="submit" class="btn btn-danger" 
                                onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç?')">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤. <a href="/posts/create">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π!</a></p>
    {% endif %}
</div>

<div class="card">
    <h2>üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
    
    {% if users %}
        <div class="user-list">
            {% for user in users %}
            <div class="card user-item">
                <div>
                    <strong>{{ user.login }}</strong> 
                    <span style="color: #666;">({{ user.email }})</span>
                    <br>
                    <small>–°–æ–∑–¥–∞–Ω: {{ user.createdAt[:10] }}</small>
                </div>
                <div class="actions">
                    <a href="/users/{{ user.id }}/edit" class="btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form method="post" action="/users/{{ user.id }}/delete" style="display:inline;">
                        <button type="submit" class="btn btn-danger" 
                                onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. <a href="/users/create">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ!</a></p>
    {% endif %}
</div>
{% endblock %}