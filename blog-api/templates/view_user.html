{% extends "base.html" %}

{% block title %}–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {{ user.login }} - –ë–ª–æ–≥{% endblock %}

{% block content %}
<div class="card">
    <h1>üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
    
    <div class="user-info" style="margin-bottom: 2rem;">
        <h2>{{ user.login }}</h2>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.createdAt[:10] }}</p>
        <p><strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> {{ user.updatedAt[:10] }}</p>
    </div>
    
    <div class="actions">
        <a href="/users/{{ user.id }}/edit" class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <form method="post" action="/users/{{ user.id }}/delete" style="display:inline;">
            <button type="submit" class="btn btn-danger" 
                    onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ user.login }}?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </form>
        <a href="/users" class="btn">‚Üê –ö —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a>
    </div>
</div>

<!-- –ü–æ—Å—Ç—ã —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
<div class="card">
    <h2>üìñ –ü–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
    
    {% set user_posts = [] %}
    {% for post in posts %}
        {% if post.author_id == user.id %}
            {% set _ = user_posts.append(post) %}
        {% endif %}
    {% endfor %}
    
    {% if user_posts %}
        <div class="post-list">
            {% for post in user_posts %}
            <div class="card post-item">
                <h3 class="post-title">
                    <a href="/posts/{{ post.id }}">{{ post.title }}</a>
                </h3>
                <p>{{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}</p>
                <div class="actions">
                    <a href="/posts/{{ post.id }}" class="btn">–ß–∏—Ç–∞—Ç—å</a>
                    <a href="/posts/{{ post.id }}/edit" class="btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>–£ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</p>
    {% endif %}
</div>
{% endblock %}